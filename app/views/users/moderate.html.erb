<div class="fullscreen white-on-purple pt-4 container-fluid">
  <div class="row">
    <div class="profile-detailed col-12">
      <div class="row">
        <div class="col col-md-1 col-lg-1 col-xl-2"></div>
        <div class="col-xs-12 col-md-10 col-lg-10 col-xl-8">
          <div class="row">
            <div class="profile-breadcrumb col-12">
              <h5><%= @user.hidden_full_name %></h5>
            </div>
            <div class="col-12">
              <div class="page-wrapper black-on-white margin-bottom-big relative">
                  <%= render "shared/button_with_icon", locals: {
                                                        path: users_path,
                                                        icon: "fas fa-times",
                                                        klass: "pastille pastille-white pastille-close flexbox"
                                                        } %>

                <div class="container">
                  <div class="row">
                    <div class="col-xs-12 col-md-6 margin-bottom-big text-center">
                      <%= cl_image_tag @user.photo.url, id:"photo" %>
                    </div>

                    <div class="col-xs-12 col-md-6">
                      <h4><%= @user.hidden_full_name %></h4>
                        <p><i class="fas fa-map-marker-alt"></i> <%= @user.address %> </p>
                        <p><i class="fas fa-phone"></i> <%= @user.phone %> </p>
                        <p><i class="fas fa-birthday-cake"></i> <%= @user.birth_date %> </p>
                        <%= link_to t('users.becoming_host_form.home_offer_btn_text'),"#home_proposal", class:"btn btn-light-purple mb-3" %>
                      <%= render "labels" %>
                      <div class="bar-separator"></div>
                      <p class="sentence">"<%= @user.sentence %>"</p>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-12">
                      <div id="id_card">
                        <%= cl_image_tag(@user.id_card.file.public_id + "." + @user.id_card.file.format, :sign_url=>true, :type=>"authenticated") %>
                      </div>
                    </div>
                    <div class="col-12">

                      <% unless @user.suspended? %>
                        <div class="flex-line">
                          <%= render "shared/button_form", local: { model: :user,
                                                                    path: @user,
                                                                    method: :patch,
                                                                    attribute: :role,
                                                                    value: @user.role == "visitor" ? "member" : "visitor",
                                                                    btn_text: @user.role == "visitor" ? "validate this member" : "unvalidate this member",
                                                                    btn_extra_class: @user.role == "visitor" ? "btn-green" : "btn-orange",
                                                                    icon: "fas fa-user-slash"
                                                                    } %>
                          <%= render "shared/button_form", local: { model: :user,
                                                                    path: @user,
                                                                    method: :patch,
                                                                    attribute: :role,
                                                                    value: "suspended",
                                                                    btn_text: "suspend this member",
                                                                    btn_extra_class: "btn-red",
                                                                    data: { confirm: t('.are_you_sure?') },
                                                                    icon: "far fa-angry"
                                                                    } %>
                        <% end %>
                      </div>

                      <div class="bar-separator-light"></div>

                    </div>
                    <div class="col-12">
                      <div class="mb-5">
                        <h5 class="mb-3">About</h5>
                        <p><%= @user.description || t('.description_none') %></p>
                      </div>
                      <h5 class="mb-3"><%= t('.photos') %></h5>
                      <div class="flex-line flex-left">
                        <div class="photo_placeholder mr-3 flexbox">
                          <i class="fas fa-camera"></i>
                        </div>
                        <div class="photo_placeholder mr-3 flexbox">
                          <i class="fas fa-camera"></i>
                        </div>
                        <div class="photo_placeholder mr-3 flexbox">
                          <i class="fas fa-camera"></i>
                        </div>
                      </div>
                      <div class="bar-separator-light"></div>

                      <h5 class="mb-3">Send Message to member : </h5>


                      <%= render "shared/mini_form", query: :message, attribute: :content, content: { label: false, path: user_messages_path(@user), method: :post, placeholder: "Beware, you are a moderator", value: session[:message], btn_text: "Send private message by mail" } %>

                      <div class="bar-separator-light"></div>


                      <div class="mb-5" id="home_proposal">
                        <h5 class="mb-3">Hosting</h5>
                        <% case @user.host %>
                          <% when "not_host" %>
                            <h5 class="p-3 bg-secondary text-white mb-3">not host</h5>
                          <% when "unvalidated_host" %>
                            <h5 class="p-3 bg-secondary text-white mb-3">unvalidated host</h5>
                            <p><%= @user.home %></p>
                            <!-- button validate -->
                            <div class="full-width">
                            <!-- button unvalidate -->
                            <%= render "shared/button_form", local: { model: :user,
                                                                      path: @user,
                                                                      method: :patch,
                                                                      attribute: :host,
                                                                      value: "validated_host",
                                                                      btn_text: "validate this member as host",
                                                                      btn_extra_class: "btn-green",
                                                                      icon: "fas fa-home"
                                                                      } %>
                            </div>
                          <% when "validated_host" %>
                            <p><%= @user.home %></p>
                            <div class="full-width">
                            <!-- button unvalidate -->
                            <%= render "shared/button_form", local: { model: :user,
                                                                      path: @user,
                                                                      method: :patch,
                                                                      attribute: :host,
                                                                      value: "not_host",
                                                                      btn_text: "unvalidate this host",
                                                                      btn_extra_class: "btn-red",
                                                                      icon: "fas fa-house-damage"
                                                                      } %>
                            </div>
                        <% end %>
                      </div>

                      <h5 class="mb-3"><%= t('.comments') %></h5>
                      <%= render "users/comments" %>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col col-md-1 col-lg-1 col-xl-2"></div>
      </div>
    </div>
  </div>
</div>
